/* Author: Drew Chase */
function handleUploadedFile(e,a){let t=new FileReader;t.readAsDataURL(e),t.onload=(()=>{a.removeClass("dragover");let r=atob(t.result.split(";base64,").pop());a.trigger("upload",[{name:e.name,content:r,file:e}])})}function startLoading(){$("body").append('<div class="loading-body"><div class="loading"></div></div>')}function stopLoading(){$("body .loading-body").remove()}$(".drag-drop-area").on("dragover",e=>{let a=$(e.target);e.preventDefault(),e.stopPropagation(),a.addClass("dragover")}),$(".drag-drop-area").on("dragleave",e=>{let a=$(e.target);e.preventDefault(),e.stopPropagation(),a.removeClass("dragover")}),$(".drag-drop-area").on("drop",e=>{let a=$(e.target);e.preventDefault(),e.stopPropagation(),a.removeClass("dragover"),handleUploadedFile(e.originalEvent.dataTransfer.files[0],a)}),$(".drag-drop-area").on("click",e=>{let a=$(e.currentTarget),t=$(`<input type="file" accept="${a.attr("accept").replace(/\*/g,"")}">`);t.trigger("click"),t.on("change",()=>{handleUploadedFile(t.prop("files")[0],a)})}),$(".drag-drop-area").each((e,a)=>{let t=$(a),r=t.attr("accept");t.html(`<i>(${r})</i>`)}),$("toggle").on("click",e=>{e.preventDefault();let a=$(e.target),t="true"===a.attr("value");a.attr("value",!t),a.trigger("toggle",[{value:!t}])});