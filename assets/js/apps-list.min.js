/* Author: Drew Chase */
async function buildAddAppOptionsFromTemplate(e){const a=await getTemplateJson(e),t=$("dialog#add-item-modal #template-options");t.html(""),t.append($(`<h2>${a.name}</h2>`)),t.append($(`<p style="text-align: center; font-size: 1.5rem; margin-top: 10px; margin-bottom: 1rem;">${a.description}</p>`));for(const e of a.options)switch(e.type){case"select":const a=e.options.map(a=>new DropdownOption(a.name,a.value,a.value==e.default)),n=new Dropdown(e.name,a);n.title=e.description,t.append(n);break;case"boolean":const p=new Toggle(e.name,e.default);p.title=e.description,t.append(p);break;case"text":const o=$('<div class="floating-input col"></div>'),i=$(`<label for="${e.name}">${e.name}</label>`),l=$(`<input type="text" placeholder="${e.description}" name="${e.name}" value="${e.default}">`);l.title=e.description,o.append(l),o.append(i),t.append(o);break;case"number":const d=$('<div class="floating-input col"></div>'),r=$(`<label for="${e.name}">${e.name}</label>`),s=$(`<input type="number" placeholder="${e.description}" name="${e.name}" value="${e.default}">`);s.title=e.description,d.append(s),d.append(r),t.append(d);break;case"color":const c=$('<div class="color-input center vertical row"></div>'),m=$(`<label for="${e.name}" class='fill'>${e.name}</label>`),u=$(`<input type="color" placeholder="${e.description}" name="${e.name}" value="${e.default}">`);c.attr("title",e.description),c.append(m),c.append(u),t.append(c);break;case"date":const f=$('<div class="floating-input col"></div>'),b=$(`<label for="${e.name}">${e.name}</label>`),v=$(`<input type="date" placeholder="${e.description}" name="${e.name}" value="${e.default}">`);v.title=e.description,f.append(v),f.append(b),t.append(f);break;case"time":const g=$('<div class="floating-input col"></div>'),y=$(`<label for="${e.name}">${e.name}</label>`),w=$(`<input type="time" placeholder="${e.description}" name="${e.name}" value="${e.default}">`);w.title=e.description,g.append(w),g.append(y),t.append(g);break;case"datetime":const h=$('<div class="floating-input col"></div>'),x=$(`<label for="${e.name}">${e.name}</label>`),k=$(`<input type="datetime-local" placeholder="${e.description}" name="${e.name}" value="${e.default}">`);k.title=e.description,h.append(k),h.append(x),t.append(h);break;case"textarea":const j=$('<div class="floating-input col"></div>'),T=$(`<label for="${e.name}">${e.name}</label>`),A=$(`<textarea type="text" placeholder="${e.description}" name="${e.name}">${e.default}</textarea>`);A.title=e.description,j.append(A),j.append(T),t.append(j);break;case"file":const D=$(`<file-input name="${e.name}" description="${e.description}" extensions="${e.extensions.join(",")}" multiple="${e.multiple}" default="${e.default}"></file-input>`);t.append(D);break;case"array":const O=$(`<array-input name="${e.name}" description="${e.description}" default="${e.default.join(",")}"></array-input>`);t.append(O)}t.append($("<div class='row center vertical fill'><button id='add-item' type='submit' style='margin: auto;width: 200px;'>Add</button></div>"))}async function getTemplateJson(e){return await $.ajax({url:`/templates/${e}/template.json`,method:"GET",dataType:"json",beforeSend:()=>{startLoading()},complete:()=>{stopLoading()},success:e=>e,error:(e,a,t)=>(console.log(t),alert(`Error: ${t}`),null)})}import Dropdown from"./doms/Dropdown.js";import Toggle from"./doms/Toggle.js";import DropdownOption from"./doms/DropdownOption.js";import ArrayInput from"./doms/ArrayItem.js";import FileInput from"./doms/FileInput.js";$("dialog#add-item-modal drop-down#template").on("change",(e,a)=>{buildAddAppOptionsFromTemplate(a.value)}),$("dialog#add-item-modal drop-down#template dropdown-option")[0].click();