/* Author: Drew Chase */
async function buildAddAppOptionsFromTemplate(e){const a=await getTemplateJson(e),t=$("dialog#add-item-modal #template-options");t.html(""),t.append($(`<h2>${a.name}</h2>`)),t.append($(`<p style="text-align: center; font-size: 1.5rem; margin-top: 10px; margin-bottom: 1rem;">${a.description}</p>`));for(const e of a.options)switch(console.log(e),e.type){case"select":const a=e.options.map(a=>new DropdownOption(a.name,a.value,a.value==e.default)),n=new Dropdown(e.name,a);n.title=e.description,t.append(n);break;case"boolean":const l=new Toggle(e.name,e.default);l.title=e.description,t.append(l);break;case"text":const o=$('<div class="floating-input col"></div>'),p=$(`<label for="${e.name}">${e.name}</label>`),i=$(`<input type="text" placeholder="${e.description}" name="${e.name}" value="${e.default}">`);i.title=e.description,o.append(i),o.append(p),t.append(o);break;case"number":const d=$('<div class="floating-input col"></div>'),r=$(`<label for="${e.name}">${e.name}</label>`),s=$(`<input type="number" placeholder="${e.description}" name="${e.name}" value="${e.default}">`);s.title=e.description,d.append(s),d.append(r),t.append(d);break;case"color":const c=$('<div class="center vertical row"></div>'),m=$(`<label for="${e.name}" class='fill'>${e.name}</label>`),u=$(`<input type="color" placeholder="${e.description}" name="${e.name}" value="${e.default}">`);u.title=e.description,c.append(m),c.append(u),t.append(c);break;case"date":const f=$('<div class="floating-input col"></div>'),b=$(`<label for="${e.name}">${e.name}</label>`),g=$(`<input type="date" placeholder="${e.description}" name="${e.name}" value="${e.default}">`);g.title=e.description,f.append(g),f.append(b),t.append(f);break;case"time":const v=$('<div class="floating-input col"></div>'),w=$(`<label for="${e.name}">${e.name}</label>`),h=$(`<input type="time" placeholder="${e.description}" name="${e.name}" value="${e.default}">`);h.title=e.description,v.append(h),v.append(w),t.append(v);break;case"datetime":const y=$('<div class="floating-input col"></div>'),k=$(`<label for="${e.name}">${e.name}</label>`),x=$(`<input type="datetime-local" placeholder="${e.description}" name="${e.name}" value="${e.default}">`);x.title=e.description,y.append(x),y.append(k),t.append(y);break;case"textarea":const T=$('<div class="floating-input col"></div>'),j=$(`<label for="${e.name}">${e.name}</label>`),D=$(`<textarea type="text" placeholder="${e.description}" name="${e.name}">${e.default}</textarea>`);D.title=e.description,T.append(D),T.append(j),t.append(T);break;case"file":const A=$('<div class="row center vertical file-input"></div>'),O=$(`<label for="${e.name}" class="fill">${e.name}</label>`),F=$('<button class="button">File</button>');A.on("click",()=>{let a=document.createElement("input");a.type="file",a.accept=e.extensions.join(","),a.multiple=e.multiple||!1,a.onchange=(e=>{var a=e.target.files[0],t=new FileReader;t.readAsDataURL(a),t.onload=(e=>{var t=e.target.result;console.log(t),F.text(a.name),F.attr("data-value",t)})}),a.click(),console.log(a)}),A.append(O),A.append(F),t.append(A)}}async function getTemplateJson(e){return await $.ajax({url:`/templates/${e}/template.json`,method:"GET",dataType:"json",beforeSend:()=>{startLoading()},complete:()=>{stopLoading()},success:e=>e,error:(e,a,t)=>(console.log(t),alert(`Error: ${t}`),null)})}import Dropdown from"./doms/Dropdown.js";import Toggle from"./doms/Toggle.js";import DropdownOption from"./doms/DropdownOption.js";$("dialog#add-item-modal drop-down#template").on("change",(e,a)=>{buildAddAppOptionsFromTemplate(a.value)}),$("dialog#add-item-modal drop-down#template dropdown-option")[0].click();