/* Author: Drew Chase */
const url=`${window.location.protocol}//auth${window.location.hostname.replace(window.location.hostname.split(".")[0],"")}/`;import(url).then(async o=>{const n=new(o=o.default)("http:"==window.location.protocol);try{0==await n.loginWithTokenFromCookie()?"/"!=window.location.pathname&&(window.location.href="/"):"/"==window.location.pathname&&(window.location.href="/apps"),stopLoading()}catch(o){console.log(o.responseJSON),"/"!=window.location.pathname&&(window.location.href="/")}stopLoading(),$("#login-form").on("submit",async()=>{startLoading();try{await n.login($("#login-form #username").val(),$("#login-form #password").val()),window.location.href="/apps"}catch(o){console.log(o.responseJSON),$("#login-form .error").html(o.responseJSON.message)}stopLoading()}),$("#login-form toggle-field#show-password").on("toggle",(o,n)=>{n.value?$("#login-form #password").attr("type","text"):$("#login-form #password").attr("type","password")}),$("#logout").on("click",async()=>{startLoading();try{n.logout(),window.location.href="/"}catch(o){console.log(o.responseJSON)}stopLoading()})}).catch(o=>{console.error(`Error importing module: ${o}`)});